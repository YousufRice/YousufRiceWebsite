ğŸš€ Project Overview

Yousuf Rice is a complete e-commerce platform built with Next.js 16, Tailwind CSS v4, TypeScript v5, and Appwrite 1.8+ (TablesDB).
It allows customers to order rice online with tier-based pricing, live location saving, and a clean checkout experience.
Admins can manage products, images, discounts, customers, and view analytics â€” all from a secure dashboard.

ğŸ§© Tech Stack

Frontend: Next.js 16 (App Router, ppr), TypeScript 5, Tailwind CSS 4
Backend: Appwrite 1.8+ (TablesDB API, Functions, Storage, Authentication, Messaging)
Storage: Appwrite Storage (product-images bucket)
Payment: Cash on Delivery (COD)
Mapping: GPS coordinates auto-generated â†’ opens in iOS or Android Maps

ğŸ·ï¸ Features Summary
ğŸ›ï¸ Customer Side

Browse rice products with tier pricing like:

2â€“4 kg â†’ Rs. 475/kg

5â€“9 kg â†’ Rs. 450/kg

10 kg & up â†’ Rs. 425/kg

Some products have flat prices (e.g., Rs. 495/kg)

Add to cart, checkout, and pay via Cash on Delivery

Enter address or share live location â€” coordinates saved

View orders and delivery status

ğŸ‘‘ Admin Side

CRUD for Products, Product Images, Orders, Customers, and Addresses

Manage tier pricing and product availability

Upload multiple product images and mark one as primary

Analytics dashboard with:

Total sales, revenue

Top-selling products

Monthly order trends

Active customers

Export orders as CSV

Only users with admin: true (Appwrite preference key) have admin access

ğŸ§± TablesDB Schema (Appwrite v1.8+)

All data is stored using Appwrite TablesDB.
Each entity is atomic, typed, and normalized â€” no embedded JSON.

1. Products
Column	Type	Required	Notes
id	string	âœ…	Primary key
name	string	âœ…	Product name
description	text	âŒ	Product details
base_price_per_kg	integer	âœ…	Flat price if no tiers
has_tier_pricing	boolean	âœ…	Whether tier pricing is used
tier_2_4kg_price	integer	âŒ	Price per kg for 2â€“4 kg
tier_5_9kg_price	integer	âŒ	Price per kg for 5â€“9 kg
tier_10kg_up_price	integer	âŒ	Price per kg for â‰¥10 kg
available	boolean	âœ…	Whether product is listed
primary_image_id	string	âŒ	FK â†’ product_images.id
created_at	datetime	âœ…	Auto timestamp

Notes:

primary_image_id references the Product Images table (not the storage bucket directly).

Admin chooses primary image via dropdown/radio from uploaded product images.

2. Product Images (new table)
Column	Type	Required	Notes
id	string	âœ…	Primary key
product_id	string	âœ…	FK â†’ products.id
file_id	string	âœ…	File ID from product-images bucket
is_primary	boolean	âŒ	True if this image is the main display image
created_at	datetime	âœ…	Auto timestamp

Notes:

Each product can have multiple rows in this table.

Only one image per product should have is_primary = true.

Images are stored in the Appwrite Storage bucket product-images.

3. Orders
Column	Type	Required	Notes
customer_id	string	âœ…	FK â†’ customers.id
address_id	string	âœ…	FK â†’ addresses.id
order_items	text	âœ…	CSV format (e.g., p001:5kg,p002:10kg)
total_price	integer	âœ…	Final computed total
status	enum	âœ…	pending, accepted, out_for_delivery, delivered
created_at	datetime	âœ…	Auto timestamp
4. Customers
Column	Type	Required	Notes
user_id	string	âœ…	Appwrite User ID
full_name	string	âœ…	Customer name
phone	string	âœ…	Contact number
email	string	âŒ	Optional
created_at	datetime	âœ…	Auto timestamp
5. Addresses
Column	Type	Required	Notes
customer_id	string	âœ…	FK â†’ customers.id
order_id	string	âœ…	FK â†’ orders.id
address_line	text	âœ…	Full address
latitude	float	âœ…	GPS coordinate
longitude	float	âœ…	GPS coordinate
maps_url	string	âœ…	Generated by Appwrite Function
created_at	datetime	âœ…	Timestamp

Maps URLs auto-generated:

Android/Web: https://www.google.com/maps?q=<lat>,<lon>

iOS: https://maps.apple.com/?q=<lat>,<lon>

6. Analytics
Column	Type	Required	Notes
metric_name	string	âœ…	e.g., "total_sales", "top_product"
metric_value	string	âœ…	Stored as string
computed_at	datetime	âœ…	Auto timestamp
7. Admins (Optional)
Column	Type	Required	Notes
user_id	string	âœ…	Appwrite user ID
is_admin	boolean	âœ…	Always true
created_at	datetime	âœ…	Timestamp

(Or rely on admin: true in Appwrite preferences.)

ğŸ—‚ï¸ Storage Configuration

Bucket: product-images

Setting	Value
Name	product-images
Permissions	Read: Public, Write: Admin only
File Size Limit	5 MB
File Types	.jpg, .jpeg, .png, .webp
Link	Use storage.getFileView(bucket, fileId) for display
ğŸ” Permissions & Access Control
Role	Access
Admin (admin: true)	Full CRUD on all tables + storage
Authenticated User	CRUD on own orders + addresses
Public	Read-only access on available products
ğŸ§® Relationships
products (1) â”€â”€â”€â”€< (n) product_images
product_images (n) â”€â”€â”€> (1) storage.product-images (file_id)
customers (1) â”€â”€â”€â”€< (n) orders
orders (1) â”€â”€â”€â”€â”€â”€â”€< (n) addresses
customers (1) â”€â”€â”€â”€< (n) addresses
products (n) â”€â”€â”€â”€â”€< (m) orders (via order_items CSV)

âš™ï¸ Index Recommendations

orders.status â€” for delivery queue filtering

addresses.customer_id â€” for rider lookups

products.name â€” for search bar

product_images.product_id â€” for efficient image lookups